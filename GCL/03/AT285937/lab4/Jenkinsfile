pipeline {

     agent any
    
    stages {
        stage('Build') {
            steps {
                sh '''
                ls -a
                docker build -t app . -f GCL/03/AT285937/lab2/dockerfile-bldr
                sh '''               
            }
            post {
            success {
            	mail to: 'atalik000@gmail.com', subject: "Budowanie ukonczone pomyslnie", body: "Budowanie ukonczone pomyslnie: ${BUILD_URL}"
            }
            failure {
            	mail to: 'atalik000@gmail.com', subject: "Blad budowania", body: "Bledy w budowaniu: ${BUILD_URL}"
            }
          }            
        }
        stage('Test') {
            steps {
                sh '''
                docker build -t test . -f GCL/03/AT285937/lab4/dockerfile-tst
                sh '''        
            }
         post {
            success {
            	mail to: 'atalik000@gmail.com', subject: "Test uruchomiony pomyslnie", body: "Test uruchomiony pomyslnie: ${BUILD_URL}"
            }
            failure {
            	mail to: 'atalik000@gmail.com', subject: "Blad testowania", body: "Bledy w testowaniu: ${BUILD_URL}"
            }
         }
    }
  }
}
